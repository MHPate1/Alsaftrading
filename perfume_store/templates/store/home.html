{% extends 'store/base.html' %}
{% block content %}
<section class="hero-slideshow">
    <div class="slide-container">
        <!-- Fragrance Slide -->
        <div class="hero-slide active" style="background-image: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), url('https://fezxyrxqjypoubhvmryd.supabase.co/storage/v1/object/sign/Perfume/General/perfumebackground.jpg?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1cmwiOiJQZXJmdW1lL0dlbmVyYWwvcGVyZnVtZWJhY2tncm91bmQuanBnIiwiaWF0IjoxNzMyNjM5NDUyLCJleHAiOjE3NjQxNzU0NTJ9.WT01uhE49VuiLghvmWJOpPprzODPRnrtdus0eX49pao&t=2024-11-26T16%3A44%3A12.843Z')">
            <div class="hero-content">
                <h1>Fragrance in<br>a bottle</h1>
                <p>A collection of heavenly fragrances</p>
                <a href="{% url 'store:shop' %}" class="btn">SHOP NOW</a>
            </div>
        </div>

        <!-- Gifts Slide -->
        <div class="hero-slide" style="background-image: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), url('https://fezxyrxqjypoubhvmryd.supabase.co/storage/v1/object/sign/Perfume/General/gifts.jpg?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1cmwiOiJQZXJmdW1lL0dlbmVyYWwvZ2lmdHMuanBnIiwiaWF0IjoxNzMyNjM5NzExLCJleHAiOjE3NjQxNzU3MTF9.nT9vvfQ9YNuaV8gNp6FC9qOcFcqZ_iBcu-TJzbpsWJ8&t=2024-11-26T16%3A48%3A31.859Z')">
            <div class="hero-content">
                <h1>Gifts<br>for all</h1>
                <p>Explore our collection of special gifts</p>
                <a href="{% url 'store:shop' %}" class="btn">SHOP GIFTS</a>
            </div>
        </div>

        <!-- Kids Slide -->
        <div class="hero-slide" style="background-image: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), url('https://fezxyrxqjypoubhvmryd.supabase.co/storage/v1/object/sign/Perfume/General/kids.jpg?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1cmwiOiJQZXJmdW1lL0dlbmVyYWwva2lkcy5qcGciLCJpYXQiOjE3MzI2Mzk3MjgsImV4cCI6MTc2NDE3NTcyOH0.xG99tECAMH1e5M8zzqHltKbBy_EQI3ZYmjnqKYWj8oA&t=2024-11-26T16%3A48%3A48.942Z')">
            <div class="hero-content">
                <h1>Shop<br>for Kids</h1>
                <p>Explore our kids collection</p>
                <a href="{% url 'store:shop' %}" class="btn">SHOP KIDS</a>
            </div>
        </div>

                <!-- Jewellery Slide -->
                <div class="hero-slide" style="background-image: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), url('https://fezxyrxqjypoubhvmryd.supabase.co/storage/v1/object/sign/Perfume/jewellery/jewellery.jpg?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1cmwiOiJQZXJmdW1lL2pld2VsbGVyeS9qZXdlbGxlcnkuanBnIiwiaWF0IjoxNzM2MjY4ODY4LCJleHAiOjE3Njc4MDQ4Njh9.QCUETD9-8_Vp6JKOZEUBPcldwmFpBz9s5u-bzch8fUI&t=2025-01-07T16%3A54%3A28.540Z')">
                    <div class="hero-content">
                        <h1>Elegant<br>Jewellery</h1>
                        <p>Discover our stunning collection</p>
                        <a href="{% url 'store:shop' %}" class="btn">SHOP JEWELLERY</a>
                    </div>
                </div>
        
                <!-- Gemstones Slide -->
                <div class="hero-slide" style="background-image: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), url('https://fezxyrxqjypoubhvmryd.supabase.co/storage/v1/object/sign/Perfume/gemstones/gemstones.jpg?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1cmwiOiJQZXJmdW1lL2dlbXN0b25lcy9nZW1zdG9uZXMuanBnIiwiaWF0IjoxNzM2MjY4OTE4LCJleHAiOjE3Njc4MDQ5MTh9.eSTJCB0P806UeHGp0y2w2SBFoebJFoIso-MCkAA-NYw&t=2025-01-07T16%3A55%3A19.625Z')">
                    <div class="hero-content">
                        <h1>Natural<br>Gemstones</h1>
                        <p>Explore our precious stones</p>
                        <a href="{% url 'store:shop' %}" class="btn">SHOP GEMSTONES</a>
                    </div>
                </div>

                <div class="hero-slide" style="background-image: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), url('https://fezxyrxqjypoubhvmryd.supabase.co/storage/v1/object/sign/Perfume/oils/shilajit.avif?token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1cmwiOiJQZXJmdW1lL29pbHMvc2hpbGFqaXQuYXZpZiIsImlhdCI6MTczODI2OTA3MywiZXhwIjoxNzY5ODA1MDczfQ.NExUH9p-tWIjjITNGjCJcgfZEVQ4ceC7tHyixeopBIw&t=2025-01-30T20%3A31%3A15.577Z')">
                    <div class="hero-content">
                        <h1>Natural<br>Shilajit</h1>
                        <p>Explore its amazing benefits</p>
                        <!-- Link directly to the new category in the shop -->
                        <a href="{% url 'store:shop' %}?category=Oils" class="btn">SHOP SHILAJIT</a>
                    </div>
                </div>

        <!-- Navigation Arrows -->
        <button class="slide-arrow prev-slide">❮</button>
        <button class="slide-arrow next-slide">❯</button>

        <!-- Slide Indicators -->
        <!-- Update the indicators to match the number of slides -->
        <div class="slide-indicators">
            <button class="indicator active"></button>
            <button class="indicator"></button>
            <button class="indicator"></button>
            <button class="indicator"></button>
            <button class="indicator"></button>
            <button class="indicator"></button>
        </div>
    </div>
</section>

<section class="category-section">
    <div class="category-cards">
        <div class="card gifts">
            <h2>Gifts <span>for all</span></h2>
            <p>Explore our collection of special gifts</p>
            <a href="{% url 'store:shop' %}" class="btn">SHOP GIFTS</a>
        </div>

        <div class="card kids">
            <h2>Shop <span>for Kids</span></h2>
            <p>Explore our kids collection</p>
            <a href="{% url 'store:shop' %}" class="btn">SHOP KIDS</a>
        </div>
    </div>
</section>

<section class="trending">
    <h2>Top Trending</h2>
    <div class="filter-buttons">
        <button class="filter-btn {% if current_category == 'Gemstones' %}active{% endif %}" 
                data-category="Gemstones">Gemstones</button>
        <button class="filter-btn {% if current_category == 'Jewellery' %}active{% endif %}" 
                data-category="Jewellery">Jewellery</button>
        <button class="filter-btn {% if current_category == 'Perfume' %}active{% endif %}" 
                data-category="Perfume">Perfume</button>
        <!-- New button -->
        <button class="filter-btn {% if current_category == 'Oils' %}active{% endif %}" 
                data-category="Oils">Herbs & Oils</button>
    </div>
    <div class="product-grid">
        {% for product in products %}
        <div class="product-card" data-category="{{ product.category }}" data-id="{{ product.id }}" 
            data-name="{{ product.name }}" data-price="{{ product.price }}" 
            data-image="{{ product.image }}" data-brand="{{ product.brand }}">
            <img src="{{ product.image }}" alt="{{ product.name }}">
            <div class="product-info">
                <h3>{{ product.name }}</h3>
                <div class="price-heart-container">
                    <p class="price">£{{ product.price }}</p>
                    <button class="heart-btn" data-product-id="{{ product.id }}">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
                        </svg>
                    </button>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</section>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Slideshow functionality
    const slides = document.querySelectorAll('.hero-slide');
    const indicators = document.querySelectorAll('.indicator');
    const prevButton = document.querySelector('.prev-slide');
    const nextButton = document.querySelector('.next-slide');
    let currentSlide = 0;
    let slideInterval = null;

    function showSlide(index) {
        slides.forEach(slide => slide.classList.remove('active'));
        indicators.forEach(indicator => indicator.classList.remove('active'));
        slides[index].classList.add('active');
        indicators[index].classList.add('active');
        currentSlide = index;
    }

    function nextSlide() {
        const next = (currentSlide + 1) % slides.length;
        showSlide(next);
    }

    function previousSlide() {
        const prev = (currentSlide - 1 + slides.length) % slides.length;
        showSlide(prev);
    }

    function startSlideshow() {
        if (slideInterval) clearInterval(slideInterval);
        slideInterval = setInterval(nextSlide, 5000);
    }

    prevButton.addEventListener('click', () => {
        previousSlide();
        startSlideshow();
    });

    nextButton.addEventListener('click', () => {
        nextSlide();
        startSlideshow();
    });

    indicators.forEach((indicator, index) => {
        indicator.addEventListener('click', () => {
            showSlide(index);
            startSlideshow();
        });
    });

    startSlideshow();

    // Product card functionality
    function attachProductCardListeners() {
        const productCards = document.querySelectorAll('.product-card');
        productCards.forEach(card => {
            card.addEventListener('click', function(e) {
                if (e.target.closest('.heart-btn')) return;
                const category = this.dataset.category;
                const productId = this.dataset.id;
                window.location.href = `/product/${category}/${productId}/`;
            });
        });
    }

    // Filter functionality
    const filterButtons = document.querySelectorAll('.filter-btn');
    
    filterButtons.forEach(button => {
        button.addEventListener('click', (e) => {
            e.preventDefault();
            filterButtons.forEach(btn => btn.classList.remove('active'));
            button.classList.add('active');
            const category = button.dataset.category;
            
            fetch(`/?category=${category}`)
                .then(response => response.text())
                .then(html => {
                    const parser = new DOMParser();
                    const doc = parser.parseFromString(html, 'text/html');
                    const newGrid = doc.querySelector('.product-grid');
                    if (newGrid) {
                        document.querySelector('.product-grid').innerHTML = newGrid.innerHTML;
                        attachProductCardListeners(); // Reattach event listeners
                    }
                });
        });
    });

    // Initial attachment of product card listeners
    attachProductCardListeners();
});
</script>


<section class="contact-banner">
    <div class="contact-content">
        <h2>Get in Touch Now</h2>
        <div class="contact-info">
            <div class="contact-item">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>
                </svg>
                <a href="tel:+441234567890">+44 7754 978245</a>
            </div>
            <div class="contact-item">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
                    <polyline points="22,6 12,13 2,6"></polyline>
                </svg>
                <a href="mailto:info@yourstore.com">support@giftoutlet.co.uk</a>
            </div>
        </div>
    </div>
</section>

<section class="trending gift-sets">
    <h2>Gift Sets</h2>
    <div class="product-grid">  <!-- Using same product-grid class as trending section -->
        {% for gift in gift_sets %}
        <div class="product-card" data-category="Gift sets" data-id="{{ gift.id }}" 
            data-name="{{ gift.name }}" data-price="{{ gift.price }}" 
            data-image="{{ gift.image }}" data-brand="{{ gift.brand }}">
            <img src="{{ gift.image }}" alt="{{ gift.name }}">
            <div class="product-info">
                <h3>{{ gift.name }}</h3>
                <div class="price-heart-container">
                    <p class="price">£{{ gift.price }}</p>
                    <button class="heart-btn" data-product-id="{{ gift.id }}">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
                        </svg>
                    </button>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</section>

<section class="reviews">
    <h2>What people have said</h2>
    <div class="review-grid">
        <div class="review-card">
            <div class="stars">⭐⭐⭐⭐⭐</div>
            <p>Very helpful and friendly man who owns the shop. Always offers good service and advice too.</p>
        </div>
        <div class="review-card">
            <div class="stars">⭐⭐⭐⭐⭐</div>
            <p>I highly recommend this shop for anyone wanting jewellery and exceptional customer service.</p>
        </div>
        <div class="review-card">
            <div class="stars">⭐⭐⭐⭐⭐</div>
            <p>Their perfume collection is simply stunning, and the offers and gift sets are gorgeous.</p>
        </div>
    </div>
</section>
{% endblock %}